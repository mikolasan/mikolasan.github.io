{"componentChunkName":"component---src-templates-knowledge-base-template-js","path":"/robots/power-board","result":{"data":{"markdownRemark":{"html":"<p>Zak <a href=\"https://blog.zakkemble.net/a-lithium-battery-charger-with-load-sharing/\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">well explained</a> how to add a MOSFET that will help with situations like</p>\n<ul>\n<li>using only battery</li>\n<li>USB connected, charging battery, battery is not used for powering the load. What USB cannot provide enough power, will charging suffer?</li>\n<li>USB connected but battery is missing (MOSFET has nothing to do here, this is on MCP73831)</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; flex:3.0754716981132075;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6efd171ac34a44f3902b6d761dd74dbd/5a6dd/MCP73831_loadshare.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32.515337423312886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA7ElEQVR42lVQ2Y7DIAz0bWNISch2pf3/H10n7UNrjYSxYA4D3IWMKBdA3s0ngCG33M/9eO6zsGah9QaESFVKgIB4X+tA+AKAhxMTK68WwiUFXQUi3Ud416JvKr8RK2KqMdPbjhUlxMzTfbnlnvMx9m17jgHFYiZHON+ETmQRe2smDIwkqMrqaunnnCW0zdEzW4Q1A0OcmaVdzkOlvoXZdBchVz7MUnXrfZkfa5nZz/YQomtN8sop/NdHb1rxQkRvs9W7cZqW+XrKQlG53cvFawvXvBWbCBKwEnyUq46IViGLg6iHv+Y1xHvHI/wfrq0JFoDI8GcAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"MCP73831 loadshare\"\n        title=\"\"\n        src=\"/static/6efd171ac34a44f3902b6d761dd74dbd/a6d36/MCP73831_loadshare.png\"\n        srcset=\"/static/6efd171ac34a44f3902b6d761dd74dbd/222b7/MCP73831_loadshare.png 163w,\n/static/6efd171ac34a44f3902b6d761dd74dbd/ff46a/MCP73831_loadshare.png 325w,\n/static/6efd171ac34a44f3902b6d761dd74dbd/a6d36/MCP73831_loadshare.png 650w,\n/static/6efd171ac34a44f3902b6d761dd74dbd/5a6dd/MCP73831_loadshare.png 802w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Which is in its turn an adaptation of <a href=\"https://ww1.microchip.com/downloads/en/AppNotes/01149c.pdf\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">a note from Microchip</a> (<em>Designing A Li-Ion Battery Charger and Load Sharing System With Microchipâ€™s Stand-Alone Li-Ion Battery Charge Management Controller</em> by Brian Chu)</p>\n<p>Interesting that I found these links in one very long rant on a <a href=\"https://www.eevblog.com/forum/beginners/tips-for-designing-a-usb-battery-powered-mcu-project-with-built-in-charging/\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">EEVblog forum</a>. Very confusing discussion full of MOSFET dyslexia ()</p>\n<p>But it was much more constructive discussion than on Electronics Stackexchange where I found very confusing topics:</p>\n<ul>\n<li><a href=\"https://electronics.stackexchange.com/questions/139600/how-to-use-coin-cell-cr2032-in-parallel-with-a-power-supply\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">How to add MOSFET</a> to switch between battery and external source. Doesn't look like the source is connected right</li>\n<li><a href=\"https://electronics.stackexchange.com/questions/495845/best-way-to-have-circuit-powered-by-usb-when-plugged-in-and-battery-when-not\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">Two diodes or MOSFET?</a> but the answer is to buy a board. Otherwise, mind bending schematics without ground. No ground at all!</li>\n<li><a href=\"https://electronics.stackexchange.com/questions/130932/switching-between-battery-and-usb-using-diode-or-logic\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">Idea with the comparator</a>. And also with two comparators that detect a voltage range (<a href=\"https://www.electronics-tutorials.ws/opamp/op-amp-comparator.html\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">window comparator curcuit</a>). Though it's interesting but doesn't look flexible: first you need to understand the window and comparators, then calculate values (take into account battery charged and discharged states, and difference between USB and battery voltage), then why one MOSFET is not enough?</li>\n</ul>\n<p>On hackster.io I found <a href=\"https://www.hackster.io/spurga_zr/esp8266-development-board-battery-powered-and-solar-powered-f3fccd\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">some concerns</a> about LDO voltage regulator (suggesting HT7333 as a solution)</p>\n<blockquote>\n<p>most boards such as Wemos, NodeMCU and others have an AMS117 voltage regulator that has an extremely high drop-out voltage of 1.3V, which makes them unusable for battery power</p>\n</blockquote>\n<p>and proper battery level readings (this is about separate LipoFuelGauge system)</p>\n<blockquote>\n<p>In order to be able to accurately measure the state of the battery, you cannot do it through resistors and ADC Pins, because the voltage of lithium-ion batteries does not drop linearly, while this chip has a special algorithm that calculates the state of the battery.</p>\n</blockquote>\n<p>More complex control - <a href=\"https://www.mikrocontroller.net/attachment/176412/Power_Multiplexer.pdf\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">voltage multiplexer</a> from Power Electronics Technology magazine</p>\n<h2 id=\"alternatives\" style=\"position:relative;\">Alternatives<a href=\"#alternatives\" aria-label=\"alternatives permalink\" class=\"with-anchor after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\">\n                <path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3\n                3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3\n                  9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64\n                  1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\">\n                </path>\n                </svg></a></h2>\n<ul>\n<li><a href=\"https://grabcad.com/library/stbc08-high-current-lipo-battery-charger-1\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">PCB design alternative</a></li>\n<li><a href=\"https://learn.adafruit.com/li-ion-and-lipoly-batteries/downloads\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">LiPo charger from Adafruit</a></li>\n</ul>\n<p>Power distribution boards</p>\n<ul>\n<li><a href=\"http://www.mateksys.com/?portfolio=pdb-xt60\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">Matek PDB-XT60 w/ BEC 5V &#x26; 12V</a> (what chip is used there?)</li>\n<li>Matek Systems PDB Supports 3S Battery for FPV Racing Drone HUB5V12V</li>\n</ul>\n<h2 id=\"plan\" style=\"position:relative;\">Plan<a href=\"#plan\" aria-label=\"plan permalink\" class=\"with-anchor after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\">\n                <path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3\n                3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3\n                  9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64\n                  1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\">\n                </path>\n                </svg></a></h2>\n<ul>\n<li>search for a prototype board for ESP32</li>\n<li>add USB connector</li>\n<li>voltage stabilizer (buck converter)</li>\n<li>battery charger chip</li>\n<li>solar panel connector</li>\n<li>battery connector</li>\n<li>SPI line connectors and power for display</li>\n<li>voltage divider between ADC and battery (to read battery level) <a href=\"https://deepbluembedded.com/esp32-adc-tutorial-read-analog-voltage-arduino/\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">about ADC</a></li>\n</ul>\n<h2 id=\"power-source\" style=\"position:relative;\">Power source<a href=\"#power-source\" aria-label=\"power source permalink\" class=\"with-anchor after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\">\n                <path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3\n                3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3\n                  9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64\n                  1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\">\n                </path>\n                </svg></a></h2>\n<p>Motors normally require higher voltage (6V, 12V, 24V) and current, and it's a good practice to keep motors, LEDs (like very long strips of LEDs), switches electronically seperated from the logic (3.3V). But <strong>how do you decouple it</strong> when the whole project should work from the battery?</p>\n<p>Do you use two batteries? Just imagine what a headache is to keep two separate batteries charged. I can only think about sophisticated system where there is an assumption that motors can kill the battery often, but at the same time the main brain must continue operating, therefore it remains only one option: to send a signal about help to other robots. But I've never seen such design.</p>\n<p>So what normal people use instead?</p>\n<p>Power supply needs to be protected from Back EMF when motors abruptly stop or reverse the rotation direction. But rechargeable battery only wins from this effect. The only concern will be values above maximum ratings especially for li-poly batteries that are very sensitive.</p>\n<p>Read more: <a href=\"https://analysisnorth.com/articles/arduino-for-a-year.html\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">Operating an Arduino for a Year from Batteries</a></p>\n<h2 id=\"battery-charger\" style=\"position:relative;\">Battery charger<a href=\"#battery-charger\" aria-label=\"battery charger permalink\" class=\"with-anchor after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\">\n                <path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3\n                3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3\n                  9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64\n                  1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\">\n                </path>\n                </svg></a></h2>\n<p>Let's design our custom board for powering the robot from one lithium polymer battery, say 3.7V and 2500mAh.</p>\n<p>First of all, even before using the battery in any way, we should think about charging it. Here's a <a href=\"https://www.adafruit.com/product/259\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">battery charger</a> from Adafruit based on <a href=\"https://cdn.sparkfun.com/assets/b/a/7/6/8/MCP73833Datasheet.pdf\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">MCP73833</a> (evaluation board <a href=\"https://ww1.microchip.com/downloads/en/DeviceDoc/51626a.pdf\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">doc</a>). For a second I thought that I found cheaper option - <a href=\"https://ww1.microchip.com/downloads/en/DeviceDoc/MCP73831-Family-Data-Sheet-DS20001984H.pdf\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">MCP73831</a> on Digi-Key in a 5-lead SOT-23 package, but it consumes 4x times less current during charging which means that it's going to charge much slower and has less indication signals. The datasheet provides PCB layout example.</p>\n<p>Old alternative for these chips is <a href=\"https://datasheets.maximintegrated.com/en/ds/MAX1551-MAX1555.pdf\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">MAX1555</a> and <a href=\"https://dlnmh9ip6v2uc.cloudfront.net/datasheets/Prototyping/TP4056.pdf\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">TP4056</a>.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; flex:2.295774647887324;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/13c201dc900e2a040da687c0f5c8a9f5/f8067/battery-charger-typical-application.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.558282208588956%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABR0lEQVR42m1R2W6DMBDk/38saqNUKih5KOE0js2RYAMGDMHpYNpGajsPaPDujmfWzuMvzPppZMN4HseJ63qU0iAIKWPPsoUjZaP6Xlq0bds0Dcg4jl3Xue/u6XQKguB4PHqe5/tnpfrRAmSe53U4y2hZlpzzDIxSQggkIMwYQx/IMAxFUQgh0FMLiYbd7kVI6aCmte77ftJ6U+0tJj2laQqCE1wQJ0nbtEop/AoLuHfMdwRITBMUtDEmSVLGeBRFRVF2bUfp5cP3UZqnWVt8Zf5Jv9bmGVEhUVXV7XYLwxDDuDDn+fmMwAptW8/vYfhZlmXjZVEKIdOU1LW43+8wT0iGVeZFwS4MopznXaeew7gQi4EEvGeE8DzHeqMorus6QQwo2UXCYHW9ri9mjPP4D4PdE4zEUfS63x8Ob3hFYxa4wCGcb7Y/ATyi/sPbEbPFAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"battery charger typical application\"\n        title=\"\"\n        src=\"/static/13c201dc900e2a040da687c0f5c8a9f5/a6d36/battery-charger-typical-application.png\"\n        srcset=\"/static/13c201dc900e2a040da687c0f5c8a9f5/222b7/battery-charger-typical-application.png 163w,\n/static/13c201dc900e2a040da687c0f5c8a9f5/ff46a/battery-charger-typical-application.png 325w,\n/static/13c201dc900e2a040da687c0f5c8a9f5/a6d36/battery-charger-typical-application.png 650w,\n/static/13c201dc900e2a040da687c0f5c8a9f5/f8067/battery-charger-typical-application.png 726w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><strong>Additional components</strong>:</p>\n<ul>\n<li>3x indicator LEDs: 2x <a href=\"https://www.mouser.com/ProductDetail/755-SML-D11YWT86\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">yellow</a> and 1x <a href=\"https://www.mouser.com/ProductDetail/720-LWQ38EQ2R23K5L\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">white</a></li>\n<li>2x capacitors <a href=\"https://www.mouser.com/ProductDetail/963-LMK107BJ475MAHT\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">4.7uF</a> - Voltage Rating 10VDC</li>\n<li>3x resistors <a href=\"https://www.mouser.com/ProductDetail/71-CRCW0805470RFKEAC\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">470 Ohms</a> - for LEDs, so for 20mA the Power Rating would be >100mW</li>\n<li>1x resistor (to set maximum charging current) <a href=\"https://www.mouser.com/ProductDetail/755-SDR10EZPF1001\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">1K</a> - for 25mA current (?), therefore the Power Rating >125mW</li>\n<li>1x resistor (to skip temperature control) <a href=\"https://www.mouser.com/ProductDetail/71-CRCW040210K0FKEDC\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">10K</a> - for 50uA and 1.25V = 62.5uW</li>\n</ul>\n<h3 id=\"send-indication-to-mcu\" style=\"position:relative;\">Send indication to MCU<a href=\"#send-indication-to-mcu\" aria-label=\"send indication to mcu permalink\" class=\"with-anchor after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\">\n                <path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3\n                3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3\n                  9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64\n                  1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\">\n                </path>\n                </svg></a></h3>\n<p>Why not send signaling information to MCU too instead of only connecting LEDs? Then a question arises here. Input voltage is 5V, will voltage on these lines will be acceptable to 3.3V GPIO?</p>\n<p>When STAT1, STAT2, or PG connected to ground, LEDs consume from 2 to 3 volts, which gives only 2 to 3 volts reaching the resistor and the chip. Then if we add a parallel route from the chip to GPIO pins, then this will work as adding a button in pull-up mode (power source is always connected to GPIO pin making high logic input on it but the circuit is not closed).</p>\n<p>Does it make sense to add a transistor? Thus to stop that high logic before LED is lit.</p>\n<p><a href=\"https://electronics.stackexchange.com/a/324804/30694\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">https://electronics.stackexchange.com/a/324804/30694</a></p>\n<p>How to use BJT <a href=\"https://electronics.stackexchange.com/questions/324795/are-bjts-suitable-for-level-shifters-it-seems-fets-are-more-common-how-do-they\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">https://electronics.stackexchange.com/questions/324795/are-bjts-suitable-for-level-shifters-it-seems-fets-are-more-common-how-do-they</a></p>\n<p>I think I just need pull-up transistors <a href=\"https://electronics.stackexchange.com/questions/381171/mcp73833-and-status-to-raspberrypi\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">https://electronics.stackexchange.com/questions/381171/mcp73833-and-status-to-raspberrypi</a>\n<a href=\"https://forum.microchip.com/s/topic/a5C3l000000MXTtEAO/t358761\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">https://forum.microchip.com/s/topic/a5C3l000000MXTtEAO/t358761</a></p>\n<p>But why positive voltage applied to the gate directly and not the logic output from PG?</p>\n<p>To keep different voltage separate</p>\n<blockquote>\n<p>The PG output can sink current, but not source current.</p>\n<p><em>From datasheet</em></p>\n</blockquote>\n<p>About MOSFETS in general: <a href=\"https://toshiba.semicon-storage.com/info/application_note_en_20180726_AKX00068.pdf?did=59460\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">https://toshiba.semicon-storage.com/info/application_note_en_20180726_AKX00068.pdf?did=59460</a></p>\n<h2 id=\"load-sharing\" style=\"position:relative;\">Load sharing<a href=\"#load-sharing\" aria-label=\"load sharing permalink\" class=\"with-anchor after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\">\n                <path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3\n                3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3\n                  9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64\n                  1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\">\n                </path>\n                </svg></a></h2>\n<p>Even an LED can cause the battery to never finish charging.</p>\n<p>USB should work as input and charge the battery too.</p>\n<p><strong>Power multiplexer</strong>. Add diodes to prevent flow from solar panel to USB (as they will share input lines).\nWhat MOSFET specs to use?</p>\n<h2 id=\"step-up-voltage-regulator\" style=\"position:relative;\">Step up voltage regulator<a href=\"#step-up-voltage-regulator\" aria-label=\"step up voltage regulator permalink\" class=\"with-anchor after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\">\n                <path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3\n                3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3\n                  9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64\n                  1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\">\n                </path>\n                </svg></a></h2>\n<p>We need to boost 3.7V voltage from our battery to 5V level where Arduino and motors can work. Preferably we should supply 3.3V to logic board and separate 5V or 6V or even more to motors. But we must keep the first version simple.</p>\n<p>Again we start with a popular at this time <a href=\"https://www.adafruit.com/product/2030\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">breakout board</a> and look at the main chip (TPS61030). For logic board AND motors I found 1.8A <a href=\"https://www.ti.com/general/docs/suppproductinfo.tsp?distId=10&#x26;gotoUrl=http%253A%252F%252Fwww.ti.com%252Flit%252Fgpn%252Ftps61322\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">TPS613222</a> and 3.6A <a href=\"https://www.ti.com/general/docs/suppproductinfo.tsp?distId=10&#x26;gotoUrl=https%3A%2F%2Fwww.ti.com%2Flit%2Fgpn%2Ftps61030\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">TPS61032</a> switch current boost converters from Texas Instruments. The datasheet provides PCB layout example.</p>\n<p>Old alternative for these chips is <a href=\"https://www.ti.com/lit/ds/symlink/tps61090.pdf?ts=1666623681120&#x26;ref_url=https%253A%252F%252Fwww.ti.com%252Fproduct%252FTPS61090\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">TPS6109</a>.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; flex:1.7340425531914894;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5767511d4151c814018d79d96c38a738/c67d4/voltage-regulator-typical-application.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.668711656441715%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABaklEQVR42n2SyW6CUBSGef9H8E0wUl250LioKRRiIyhE4DI7M7afkFBNtWdh7sXzT+dc6ftFlWVZ1w2Hpmk4P+2R/n7K81wIMZvNTNPc7/fb7XaxWIRhGEVRXdcvwYjw63lelmWu6+52uzRND4eD7/tFUQRBwLVvew62LAvk9XrVdX0wGCAex3GSJBhB/AHc3FfryvW88/l8Op3iKHIc+3g8Io5h8CIQ5IeXaLRLPY32qSmjERItxsEzOQHgtgt/uVx0w9hsNqqq6rqR54WEJUxGYTifz6fT6VdbqvohhM/fkKZZZpoWGE1VDcOAlIY0zW62NU1jnuCxV1ZVZx/lW3LPI2QcRyDRp3O5fOdcFGXnV1qv13iDiSRt6ltsx3bG4zdFUbAzmUzk4ZCRsYXVakX+31Ux0vt7v62KKsskTrgSmCVhjSk+7JmV3j+gDoxbsjEnWZaJYNt2J9CF+u+F9SyQMo6qHcTT5/kDJJunlsKDjX0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"voltage regulator typical application\"\n        title=\"\"\n        src=\"/static/5767511d4151c814018d79d96c38a738/a6d36/voltage-regulator-typical-application.png\"\n        srcset=\"/static/5767511d4151c814018d79d96c38a738/222b7/voltage-regulator-typical-application.png 163w,\n/static/5767511d4151c814018d79d96c38a738/ff46a/voltage-regulator-typical-application.png 325w,\n/static/5767511d4151c814018d79d96c38a738/a6d36/voltage-regulator-typical-application.png 650w,\n/static/5767511d4151c814018d79d96c38a738/c67d4/voltage-regulator-typical-application.png 723w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><strong>Additional components</strong>:</p>\n<ul>\n<li>1x coil (inductor) <a href=\"https://www.mouser.com/ProductDetail/81-DFE201612E-2R2MP2\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">2.2uH</a> (max DC current > 1.18A)</li>\n<li>1x <a href=\"https://www.mouser.com/ProductDetail/771-PMEG1020EAT-R\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">schottky diode</a> (<a href=\"https://www.mouser.com/ProductDetail/652-CD1206-B240\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">alt</a>) (required for >250mA loads) - find average and peak current from <a href=\"https://www.mouser.com/datasheet/2/281/reference_specification_DFE201612E-1101893.pdf\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">the inductor</a> (1.8A, 2.4A)</li>\n<li>1x resistor <a href=\"https://www.mouser.com/ProductDetail/603-RC0201JR-075R6L\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">5 Ohms</a> (for RC snubber) - <a href=\"https://www.maximintegrated.com/content/dam/files/design/technical-documents/design-solutions/ds32-correct-snubber-power-loss-estimate-saves-the-day.pdf\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">power dissipation of the snubber</a> is calculated as CV^2f = 150pF x (5V)^2 x 1MHz = 3.75mW (frequency of the circuit is calculated by the formula in datasheet with values V_in = 4V, V_out = 5V, n = 0.9, L = 2.2uH, I_lh = 0.5A)</li>\n<li>1x capacitor <a href=\"https://www.mouser.com/ProductDetail/710-885012005014\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">150pF</a> (for RC snubber) - x3 of <a href=\"https://www.mouser.com/datasheet/2/916/PMEG1020EA-2938861.pdf\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">schottky diode capacitance</a> (45pF x 3 = 135pF) and voltage rating 10V</li>\n<li>3x capacitors <a href=\"https://www.mouser.com/ProductDetail/81-GRM188R60J106ME4D\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">10uF</a> - voltage Rating 6.3VDC</li>\n</ul>\n<h2 id=\"connectors\" style=\"position:relative;\">Connectors<a href=\"#connectors\" aria-label=\"connectors permalink\" class=\"with-anchor after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\">\n                <path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3\n                3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3\n                  9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64\n                  1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\">\n                </path>\n                </svg></a></h2>\n<ul>\n<li>Arduino uses <strong>barrel jack</strong> connector, and more precisely 2.10mm ID (0.083\"), 5.50mm OD (0.217\")</li>\n<li>Power for Arduino or Raspberry Pi (1/2 - in theory) - <a href=\"https://www.digikey.com/en/products/detail/gct/USB3150-30-130-A/9859649\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">Micro USB Type B Male Vertical</a> - connector is perpendicular to the board's surface thus it connects to Arduino or Raspberry Pi perpendicular as well. Raspberry Pi 1/2 where lower power consumption. Some components not rated for the current greater than 1A, so with Raspberry Pi 4 it can fry them)</li>\n<li>Battery to the board - <a href=\"https://www.digikey.com/en/products/detail/jst-sales-america-inc/S2B-PH-K-S-LF-SN/926626\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">JST PH Connector</a></li>\n<li>For charging USB cable let's be modern and use type C - <a href=\"https://www.digikey.com/en/products/detail/adam-tech/USB-C31-S-VT-CS4-BK-PP-T-R/9832222\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">USB Type C Female</a></li>\n</ul>\n<h2 id=\"dont-forget\" style=\"position:relative;\">Don't forget<a href=\"#dont-forget\" aria-label=\"dont forget permalink\" class=\"with-anchor after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\">\n                <path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3\n                3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3\n                  9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64\n                  1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\">\n                </path>\n                </svg></a></h2>\n<ul>\n<li>Programmer connector. Two options: USB to UART with chips like CP210x or CH340, and see <a href=\"https://dl.espressif.com/dl/schematics/ESP32-S2-DevKitM-1_V1_Schematics.pdf\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">DevKitM</a> for <a href=\"/make/esp32-s2-wroom\">WROOM</a>; or COM port (or USB to Serial converter) directly connected to RXD and TXD pins (this <a href=\"https://forum.arduino.cc/t/debugging-my-esp32-programmer/703334/13\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">might not work on every system</a>, maybe because DTR and RTS which just automatically trigger <strong>Reset</strong> and <strong>Boot</strong> buttons)</li>\n</ul>\n<p><img src=\"/make/cp210x-vs-ch340.png\" alt=\"Picture from Last Minute Engineers showing form and marking difference between CP210x and CH340\" title=\"Source: [Last Minute Engineers: Installing ESP32 Board in the Arduino IDE](https://lastminuteengineers.com/esp32-arduino-ide-tutorial/)\"></p>\n<ul>\n<li>Add several buttons in a joystick formation plus functional buttons (for setup, menu) (seen a capacitors near buttons on a dev board and wondered, so here's <a href=\"https://hackaday.com/2015/12/09/embed-with-elliot-debounce-your-noisy-buttons-part-i/\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">small info about debounce</a>)</li>\n</ul>\n<h2 id=\"solar-panel\" style=\"position:relative;\">Solar Panel<a href=\"#solar-panel\" aria-label=\"solar panel permalink\" class=\"with-anchor after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\">\n                <path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3\n                3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3\n                  9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64\n                  1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\">\n                </path>\n                </svg></a></h2>\n<ul>\n<li>Solar panels <a href=\"https://solar.lowtechmagazine.com/2023/12/how-to-build-a-small-solar-power-system/#withbattery\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">https://solar.lowtechmagazine.com/2023/12/how-to-build-a-small-solar-power-system/#withbattery</a></li>\n<li>Mcp 7387 (not 3, not 1) and big big big capacitor will handle unstable panels <a href=\"https://learn.adafruit.com/usb-dc-and-solar-lipoly-charger/using-the-charger?view=all#downloads\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">https://learn.adafruit.com/usb-dc-and-solar-lipoly-charger/using-the-charger?view=all#downloads</a></li>\n</ul>\n<p>And then carefuly think about power consumption and try to save on some functionality that you don't use. For example, here an amazing list <a href=\"https://www.gammon.com.au/power\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">from</a></p>\n<ul>\n<li>Run the processor at a lower frequency</li>\n<li>Run the processor at a lower voltage</li>\n<li>Turn off unneeded internal modules in software (eg. SPI, I2C, Serial, ADC)</li>\n<li>Turn off brownout detection</li>\n<li>Turn off the Analog-to-Digital converter (ADC)</li>\n<li>Turn off the watchdog timer</li>\n<li>Put the processor to sleep</li>\n<li>Don't use inefficient voltage regulators - if possible run directly from batteries</li>\n<li>Don't use power-hungry displays (eg. indicator LEDs, backlit LCDs)</li>\n<li>Arrange to wake the processor from sleep only when needed</li>\n<li>Turn off (with a MOSFET) external devices (eg. SD cards, temperature sensors) until needed</li>\n</ul>\n<h2 id=\"adc\" style=\"position:relative;\">ADC<a href=\"#adc\" aria-label=\"adc permalink\" class=\"with-anchor after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\">\n                <path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3\n                3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3\n                  9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64\n                  1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\">\n                </path>\n                </svg></a></h2>\n<p>Max range is from 0 to Vref which is 3.3V. But for precise readings the maximum value should be lower and that limit is defined by the attenuation setting. Read <a href=\"https://deepbluembedded.com/esp32-adc-tutorial-read-analog-voltage-arduino/\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">more here</a> and in <a href=\"https://docs.espressif.com/projects/esp-idf/en/v4.4.1/esp32s2/api-reference/peripherals/adc.html\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">the docs</a></p>\n<p>ADC on ESP32 known to have issues. Some <a href=\"https://forum.arduino.cc/t/fixing-the-non-linear-adc-of-an-esp32/699190\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">simple steps to resolve</a> it\n[ADC calibration] (<a href=\"https://esp32.com/viewtopic.php?f=19&#x26;t=2881&#x26;start=20#p16166\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">https://esp32.com/viewtopic.php?f=19&#x26;t=2881&#x26;start=20#p16166</a>). Reference voltage Vref can be measured by a multimeter if it directed by a special command to an IO pin.\nLast <a href=\"https://docs.espressif.com/projects/esp-idf/en/v5.2.2/esp32s2/api-reference/peripherals/adc_calibration.html\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">docs</a></p>\n<p>We are going to implore <a href=\"https://electronics.stackexchange.com/questions/117511/transistor-resistance-for-switching-analog-signals\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">\"paleolithic circuit design\"</a> with two transistors instead of going the smart way and using CMOS analog switch (like <a href=\"https://www.mouser.com/datasheet/2/609/ADG511_512_513-1502905.pdf\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">this</a> (but can find cheaper alternatives)).</p>\n<p>It can be a good idea to use an external ADC (for example <a href=\"https://www.ti.com/lit/ds/symlink/adc101c021.pdf\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">ADC101C021</a> or <a href=\"https://www.mouser.com/datasheet/2/268/20001805C-3135681.pdf\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">MCP3021</a>)</p>\n<h2 id=\"qa\" style=\"position:relative;\">Q&#x26;A<a href=\"#qa\" aria-label=\"qa permalink\" class=\"with-anchor after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\">\n                <path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3\n                3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3\n                  9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64\n                  1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\">\n                </path>\n                </svg></a></h2>\n<ul>\n<li>\n<p>Do you know that batteries can have multiple cells. One cell is <strong>3.7V</strong>. 2 cells (2S) - <strong>7.4V</strong>. 3 cells (3S) - <strong>11.1V</strong></p>\n</li>\n<li>\n<p>Why capacitors are basically everywhere?</p>\n</li>\n</ul>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"flex:1.8314606741573034;\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6d8ddc641339d315bef42c48b6a38fe4/69d6b/capacitors-q-a.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.601226993865026%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB6klEQVR42mVQbW/aMBDOz9hghQJtxfpxf7vqKq1Q3kHdKhXUshYodJVarQWS5o3EiY2dOLYzh7AJaafTczr7nrt7TimVjouFci53eFA6zuePcnuJ7+cPP+0d7G08lylmssXifvlz+Us2U8pmCh8/5CUWCmWl0Wi3251Go1mrNVKv15u1ektiu9VptTqnp+dnZ5VvlWqlWj2vSKhdXNS73d7JyVeFM0GpiFPbREoC4vqxENIZZcghnCfvLCQBRJwLaTJVVVUJ1lhdqM7KwZBQyuQHCTD2fX2+AI5PQwodhDFmUSTRMqwwjDhnkmxZtpLM4xzYQFNNT5aFlLBAtgiCUHCRLCM2szbTdhEAoMQ7GzPBPOAyxuL/jMt1+VZdStZ1XUkTxhJZVFC4AgGJ/hZtmVREa+QjD26p/zTLgBC0DXsNoU+hj2EkqA/Q2gtcBwHNwJ67jrC8gyevuDNZVTWFcWZapr5YOs6K8MDFPiDo8dG4GXDTjJcv7mg8f3qDb++evniVTTGhqa7lUlXkQeQlIwgR9C3X1ICxRPbrr7mtBbLCfI+enj1EYkpjDDy+UZeKT9Yej8cP0+nP4fCy8+Pmuj+6vXuZ//5+eT+dzHVDe7h9bjV7g/v+8G54dX016Pcnk8loNJrNZt1u7w87ljGN8X19lAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"schematics with many capacitors\"\n        title=\"Capacitors are everywhere. Or at least in many places where the power is applied\"\n        src=\"/static/6d8ddc641339d315bef42c48b6a38fe4/a6d36/capacitors-q-a.png\"\n        srcset=\"/static/6d8ddc641339d315bef42c48b6a38fe4/222b7/capacitors-q-a.png 163w,\n/static/6d8ddc641339d315bef42c48b6a38fe4/ff46a/capacitors-q-a.png 325w,\n/static/6d8ddc641339d315bef42c48b6a38fe4/a6d36/capacitors-q-a.png 650w,\n/static/6d8ddc641339d315bef42c48b6a38fe4/e548f/capacitors-q-a.png 975w,\n/static/6d8ddc641339d315bef42c48b6a38fe4/3c492/capacitors-q-a.png 1300w,\n/static/6d8ddc641339d315bef42c48b6a38fe4/69d6b/capacitors-q-a.png 1912w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>Capacitors are everywhere. Or at least in many places where the power is applied</p></figcaption>\n  </figure></p>\n<h2 id=\"extra\" style=\"position:relative;\">Extra<a href=\"#extra\" aria-label=\"extra permalink\" class=\"with-anchor after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\">\n                <path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3\n                3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3\n                  9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64\n                  1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\">\n                </path>\n                </svg></a></h2>\n<ul>\n<li>Serial port debugging with <a href=\"https://sites.google.com/site/terminalbpp/\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">Bray++ terminal</a></li>\n<li>Futuristic case: small PCB board connects to a sheet of acrylic where itâ€™s cut with special lines to deliver led lights to sides. Also the battery is attached to that part. Acrylic and PCB are connected by custom 3d printed piece</li>\n<li>Smooth routes: <a href=\"https://github.com/mitxela/kicad-round-tracks\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">kicad plugin</a> posts about melting kicad <a href=\"https://mitxela.com/projects/melting_kicad\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">1</a> and <a href=\"https://mitxela.com/projects/melting_kicad_2\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">2</a>. In KiCad 8 draw a normal sharp route, then select all intervals, right click and select <strong>Fillet Tracks</strong> and set radius to 2mm.</li>\n</ul>","excerpt":"Zak well explained how to add a MOSFET that will help with situations like using only battery USB connected, charging battery, battery isâ€¦","tableOfContents":"<ul>\n<li>\n<p><a href=\"#alternatives\">Alternatives</a></p>\n</li>\n<li>\n<p><a href=\"#plan\">Plan</a></p>\n</li>\n<li>\n<p><a href=\"#power-source\">Power source</a></p>\n</li>\n<li>\n<p><a href=\"#battery-charger\">Battery charger</a></p>\n<ul>\n<li><a href=\"#send-indication-to-mcu\">Send indication to MCU</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#load-sharing\">Load sharing</a></p>\n</li>\n<li>\n<p><a href=\"#step-up-voltage-regulator\">Step up voltage regulator</a></p>\n</li>\n<li>\n<p><a href=\"#connectors\">Connectors</a></p>\n</li>\n<li>\n<p><a href=\"#dont-forget\">Don't forget</a></p>\n</li>\n<li>\n<p><a href=\"#solar-panel\">Solar Panel</a></p>\n</li>\n<li>\n<p><a href=\"#adc\">ADC</a></p>\n</li>\n<li>\n<p><a href=\"#qa\">Q&#x26;A</a></p>\n</li>\n<li>\n<p><a href=\"#extra\">Extra</a></p>\n</li>\n</ul>","frontmatter":{"date":"October 20, 2022","published":"December 20, 2022","lastModified":"December 21, 2022","title":"Power board","subtitle":null,"section":"robot","draft":null,"developing":null,"buttonText":null,"buttonLink":null,"secondButtonText":null,"secondButtonLink":null,"featuredImage":null}}},"pageContext":{"showLikes":true,"absolutePath":"/home/runner/work/mikolasan.github.io/mikolasan.github.io/src/markdown/robots/power-board.md","url":"/robots/power-board","next":{"excerpt":"Observation: everyone creates their version [of motor controller/driver board] Starfish by Stargirl Acorn by Taylor Alexander or relies onâ€¦","fileAbsolutePath":"/home/runner/work/mikolasan.github.io/mikolasan.github.io/src/markdown/robots/motor-controller-board.md","frontmatter":{"title":"Motor controller board","date":"2022-10-30T00:00:00.000Z","topic":null,"article":null},"id":"1b083bf4-b011-55c5-95a0-e15062971d7c"},"previous":{"excerpt":"Planetary gear train Main question here is power and torque which is created by series of spur gears called a gear train. It could be simpleâ€¦","fileAbsolutePath":"/home/runner/work/mikolasan.github.io/mikolasan.github.io/src/markdown/robots/motors.md","frontmatter":{"title":"Motors","date":"2022-09-24T00:00:00.000Z","topic":true,"article":null},"id":"49f89eb7-c121-5c41-b9bd-38b7a350845c"},"recentArticles":[{"excerpt":"Introduction Power source Design power board Solar powered Movements and muscles Sensors Motors Muscles Compensate motor jitter Carcassâ€¦","fileAbsolutePath":"/home/runner/work/mikolasan.github.io/mikolasan.github.io/src/markdown/robots/NAV.md","frontmatter":{"title":"","date":null,"topic":null,"article":null},"id":"90a9d1b7-2196-5980-bc97-cd15eb12634e"},{"excerpt":"Can you explain what do you find in ROS that is missing in regular Linux? (Iâ€™ve never used ROS, but itâ€™s mentioned regularly, and Iâ€™mâ€¦","fileAbsolutePath":"/home/runner/work/mikolasan.github.io/mikolasan.github.io/src/markdown/robots/in-search-of-robotic-operating-system.md","frontmatter":{"title":"In search of Robotic Operating System","date":"2023-09-25T00:00:00.000Z","topic":null,"article":null},"id":"cbf333dc-08f7-5cf7-9a1f-f00f8a6330ae"},{"excerpt":"What eco-friendly robot differs from others? Such robots can use renewable or alternative sources of energy, such as solar power, biofuelâ€¦","fileAbsolutePath":"/home/runner/work/mikolasan.github.io/mikolasan.github.io/src/markdown/robots/eco-friendly.md","frontmatter":{"title":"Eco friendly robot","date":"2023-08-03T00:00:00.000Z","topic":true,"article":null},"id":"589ab9a8-736e-5b40-8b86-3d21dc32c9f8"},{"excerpt":"Electromagnets electromagnet solenoid wireless charging Soft robotics Interesting topic called Soft robotics. Shape changing, regeneratingâ€¦","fileAbsolutePath":"/home/runner/work/mikolasan.github.io/mikolasan.github.io/src/markdown/robots/artificial-muscle.md","frontmatter":{"title":"Artificial muscle","date":"2023-07-18T00:00:00.000Z","topic":true,"article":null},"id":"5dde1fa8-b49f-5190-bdc3-8d9881f7a4be"},{"excerpt":"Imagine having a robot coach that is always by your side, helping you to get things done quicker and easier. A robot coach that is not justâ€¦","fileAbsolutePath":"/home/runner/work/mikolasan.github.io/mikolasan.github.io/src/markdown/robots/prototype-3-planning.md","frontmatter":{"title":"Prototype 3","date":"2023-07-17T00:00:00.000Z","topic":null,"article":null},"id":"8025eb2e-7702-5025-983a-a28995365acf"}]}},"staticQueryHashes":["2961657013","447685113"],"slicesMap":{}}