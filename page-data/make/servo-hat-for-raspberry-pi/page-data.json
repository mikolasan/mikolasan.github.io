{"componentChunkName":"component---src-templates-blog-template-js","path":"/make/servo-hat-for-raspberry-pi","result":{"data":{"markdownRemark":{"html":"<p><a href=\"https://www.sparkfun.com/products/15316\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">SparkFun Pi Servo pHAT</a>: <a href=\"https://github.com/sparkfun/Pi_Servo_Hat/tree/v20\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">code</a>, <a href=\"https://piservohat-py.readthedocs.io/en/latest/index.html\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">docs</a></p>\n<ul>\n<li><a href=\"https://github.com/sparkfun/PiServoHat_Py/blob/main/pi_servo_hat.py\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">sparkfun-pi-servo-hat source</a>,</li>\n<li>its dependency <a href=\"https://github.com/sparkfun/Qwiic_PCA9685_Py/blob/main/qwiic_pca9685.py\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">sparkfun-qwiic-pca9685</a>,</li>\n<li>and I2C driver <a href=\"https://github.com/sparkfun/Qwiic_I2C_Py/blob/master/qwiic_i2c/linux_i2c.py\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">sparkfun-qwiic-i2c</a> based on <strong>smbus2</strong></li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> pi_servo_hat\n<span class=\"token keyword\">import</span> time\n\n<span class=\"token comment\"># Initialize Constructor</span>\ntest <span class=\"token operator\">=</span> pi_servo_hat<span class=\"token punctuation\">.</span>PiServoHat<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># Restart Servo Hat (in case Hat is frozen/locked)</span>\ntest<span class=\"token punctuation\">.</span>restart<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># Test Run</span>\n<span class=\"token comment\">#########################################</span>\n<span class=\"token comment\"># Moves servo position to 0 degrees (1ms), Channel 0</span>\ntest<span class=\"token punctuation\">.</span>move_servo_position<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># Pause 1 sec</span>\ntime<span class=\"token punctuation\">.</span>sleep<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># Moves servo position to 90 degrees (2ms), Channel 0</span>\ntest<span class=\"token punctuation\">.</span>move_servo_position<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">90</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># Pause 1 sec</span>\ntime<span class=\"token punctuation\">.</span>sleep<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># Sweep</span>\n<span class=\"token comment\">#########################################</span>\n<span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">90</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span>\n        test<span class=\"token punctuation\">.</span>move_servo_position<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">)</span>\n        time<span class=\"token punctuation\">.</span>sleep<span class=\"token punctuation\">(</span><span class=\"token number\">.001</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">90</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span>\n        test<span class=\"token punctuation\">.</span>move_servo_position<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">)</span>\n        time<span class=\"token punctuation\">.</span>sleep<span class=\"token punctuation\">(</span><span class=\"token number\">.001</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Sidequest: I2C library in C</p>\n<ul>\n<li><a href=\"https://elinux.org/Interfacing_with_I2C_Devices\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">A page</a> from eLinux wiki, no <code class=\"language-text\">smbus</code></li>\n<li><a href=\"https://github.com/amaork/libi2c/blob/master/src/i2c.c\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">libi2c</a>. Note: it uses meson build system.</li>\n<li><a href=\"https://github.com/OnionIoT/i2c-exp-driver/blob/master/src/lib/onion-i2c.c\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">i2c-exp-driver</a> from Onion company</li>\n</ul>\n<p>forks:</p>\n<ul>\n<li><a href=\"https://github.com/coupdair/libi2c\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">https://github.com/coupdair/libi2c</a></li>\n</ul>","excerpt":"SparkFun Pi Servo pHAT: code, docs sparkfun-pi-servo-hat source, its dependency sparkfun-qwiic-pca9685, and I2C driver sparkfun-qwiic-i2c…","tableOfContents":"","fields":{"socialcard":"gatsby-plugin-social-card/67955fe8-3bea-5d5f-9843-30ddf0753e0a.jpg"},"frontmatter":{"date":"November 04, 2023","published":"November 04, 2023","lastModified":"November 04, 2023","title":"Servo Hat","subtitle":"16 PWM channels controllable over I2C","section":null,"draft":null,"developing":null,"buttonText":null,"buttonLink":null,"secondButtonText":null,"secondButtonLink":null,"featuredImage":null}}},"pageContext":{"showLikes":true,"absolutePath":"/home/runner/work/mikolasan.github.io/mikolasan.github.io/src/markdown/make/servo-hat-for-raspberry-pi.md","url":"/make/servo-hat-for-raspberry-pi","next":{"excerpt":"From Ali Capacitive Soil Moisture Sensor TFT Display Module Wishlist T-Deck - Blackbery / Nokia clone T-Display - Juicy display, favourite…","fileAbsolutePath":"/home/runner/work/mikolasan.github.io/mikolasan.github.io/src/markdown/make/list-of-my-electronics.md","frontmatter":{"title":"List of my electronics","date":"2023-11-04T00:00:00.000Z","topic":null,"article":null},"id":"aaf2eb11-aafc-53b4-8985-639f80546941"},"previous":{"excerpt":"This is my main inspiration: Face Pot and software Pot redesign https://www.printables.com/model/757270-the-vyre-planter-pot-orchid-pot…","fileAbsolutePath":"/home/runner/work/mikolasan.github.io/mikolasan.github.io/src/markdown/make/smart-plant-pot.md","frontmatter":{"title":"Smart plant pot","date":"2023-10-04T00:00:00.000Z","topic":null,"article":null},"id":"0608d243-f535-5bac-a748-ff8c9b3aa5d0"},"recentArticles":[{"excerpt":"Specs  Screen size: 135 x 240 (14.86 x 24.91 mm) Module size: 30.40 x 28 (mm) Colors: 65K Protocol: SPI IC: ST7789V datasheet VCC: 3.3V…","fileAbsolutePath":"/home/runner/work/mikolasan.github.io/mikolasan.github.io/src/markdown/make/tft-display-module-st7789v.md","frontmatter":{"title":"1.14 Inch TFT Display Module","date":"2024-05-20T00:00:00.000Z","topic":null,"article":null},"id":"54f8d0fc-0527-52f3-9f3f-c8092b59aab8"},{"excerpt":"Specs 32-bit MCU (Xtensa LX7, up to 240 MHz) from Espressif ESP32-S2-WROOM. Datasheet, Technical Reference, official Development board, and…","fileAbsolutePath":"/home/runner/work/mikolasan.github.io/mikolasan.github.io/src/markdown/make/esp32-s2-wroom.md","frontmatter":{"title":"ESP32-S2-WROOM","date":"2024-05-10T00:00:00.000Z","topic":null,"article":null},"id":"71da55ca-5916-5ef5-a446-e0e0e33defae"},{"excerpt":"Not every Pi has Adreno GPU Orange Pi = Rockchip, therefore they have Mali GPU Raspberry Pi = VideoCore GPU Banana Pi (BPI-M4 Berry…","fileAbsolutePath":"/home/runner/work/mikolasan.github.io/mikolasan.github.io/src/markdown/make/list-of-single-board-computers.md","frontmatter":{"title":"List of Single Board Computers","date":"2024-05-10T00:00:00.000Z","topic":null,"article":null},"id":"3ea54fc7-f210-59b2-8949-e6eba9ea9270"},{"excerpt":"Operating Voltage: 5V DC Operating Current: 15mA Measure Angle: 15° Ranging Distance: 2cm - 4m Accuracy +-3mm Despite many chips on the back…","fileAbsolutePath":"/home/runner/work/mikolasan.github.io/mikolasan.github.io/src/markdown/make/distance-sensor.md","frontmatter":{"title":"Distance sensor","date":"2024-04-20T00:00:00.000Z","topic":null,"article":null},"id":"e7174c85-c2ae-58d4-b782-646165e04deb"},{"excerpt":"From a letter where a try to find a datasheet I represent <>, a company specializing in the upcycling of used electronics. We're currently…","fileAbsolutePath":"/home/runner/work/mikolasan.github.io/mikolasan.github.io/src/markdown/make/nand-memory.md","frontmatter":{"title":"NAND memory","date":"2023-12-27T00:00:00.000Z","topic":null,"article":null},"id":"d70fae59-0e49-5808-bc54-d61455e06c51"}]}},"staticQueryHashes":["2961657013","447685113"],"slicesMap":{}}