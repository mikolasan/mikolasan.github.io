{"componentChunkName":"component---src-templates-blog-template-js","path":"/make/distance-sensor","result":{"data":{"markdownRemark":{"html":"<ul>\n<li>Operating Voltage: 5V DC</li>\n<li>Operating Current: 15mA</li>\n<li>Measure Angle: 15°</li>\n<li>Ranging Distance: 2cm - 4m</li>\n<li>Accuracy +-3mm</li>\n</ul>\n<p>Despite many chips on the back side of this board, it does not use any protocols like I2C or SPI. But neither it requires analog-to-digital converter.\nIt rather close to its physical properties, how a measurement signal sent about every 60 ms and received after some time. 1 uS = 58 cm</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token comment\">/*\n  SparkFun Inventor’s Kit\n  Circuit 3B-Distance Sensor\n\n  Control the color of an RGB LED using an ultrasonic distance sensor.\n\n  This sketch was written by SparkFun Electronics, with lots of help from the Arduino community.\n  This code is completely free for any use.\n\n  View circuit diagram and instructions at: https://learn.sparkfun.com/tutorials/sparkfun-inventors-kit-experiment-guide---v40\n  Download drawings and code at: https://github.com/sparkfun/SIK-Guide-Code\n*/</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token keyword\">int</span> trigPin <span class=\"token operator\">=</span> <span class=\"token number\">11</span><span class=\"token punctuation\">;</span>           <span class=\"token comment\">//connects to the trigger pin on the distance sensor</span>\n<span class=\"token keyword\">const</span> <span class=\"token keyword\">int</span> echoPin <span class=\"token operator\">=</span> <span class=\"token number\">12</span><span class=\"token punctuation\">;</span>           <span class=\"token comment\">//connects to the echo pin on the distance sensor</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token keyword\">int</span> redPin <span class=\"token operator\">=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span>             <span class=\"token comment\">//pin to control the red LED inside the RGB LED</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token keyword\">int</span> greenPin <span class=\"token operator\">=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span>           <span class=\"token comment\">//pin to control the green LED inside the RGB LED</span>\n<span class=\"token keyword\">const</span> <span class=\"token keyword\">int</span> bluePin <span class=\"token operator\">=</span> <span class=\"token number\">6</span><span class=\"token punctuation\">;</span>            <span class=\"token comment\">//pin to control the blue LED inside the RGB LED</span>\n\n<span class=\"token keyword\">float</span> distance <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>               <span class=\"token comment\">//stores the distance measured by the distance sensor</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">setup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n  Serial<span class=\"token punctuation\">.</span><span class=\"token function\">begin</span> <span class=\"token punctuation\">(</span><span class=\"token number\">9600</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>        <span class=\"token comment\">//set up a serial connection with the computer</span>\n\n  <span class=\"token function\">pinMode</span><span class=\"token punctuation\">(</span>trigPin<span class=\"token punctuation\">,</span> OUTPUT<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>   <span class=\"token comment\">//the trigger pin will output pulses of electricity</span>\n  <span class=\"token function\">pinMode</span><span class=\"token punctuation\">(</span>echoPin<span class=\"token punctuation\">,</span> INPUT<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>    <span class=\"token comment\">//the echo pin will measure the duration of pulses coming back from the distance sensor</span>\n\n  <span class=\"token comment\">//set the RGB LED pins to output</span>\n  <span class=\"token function\">pinMode</span><span class=\"token punctuation\">(</span>redPin<span class=\"token punctuation\">,</span> OUTPUT<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">pinMode</span><span class=\"token punctuation\">(</span>greenPin<span class=\"token punctuation\">,</span> OUTPUT<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">pinMode</span><span class=\"token punctuation\">(</span>bluePin<span class=\"token punctuation\">,</span> OUTPUT<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">loop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  distance <span class=\"token operator\">=</span> <span class=\"token function\">getDistance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>   <span class=\"token comment\">//variable to store the distance measured by the sensor</span>\n\n  Serial<span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span>distance<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>     <span class=\"token comment\">//print the distance that was measured</span>\n  Serial<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\" in\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>      <span class=\"token comment\">//print units after the distance</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>distance <span class=\"token operator\">&lt;=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>                       <span class=\"token comment\">//if the object is close</span>\n\n    <span class=\"token comment\">//make the RGB LED red</span>\n    <span class=\"token function\">analogWrite</span><span class=\"token punctuation\">(</span>redPin<span class=\"token punctuation\">,</span> <span class=\"token number\">255</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">analogWrite</span><span class=\"token punctuation\">(</span>greenPin<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">analogWrite</span><span class=\"token punctuation\">(</span>bluePin<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token number\">10</span> <span class=\"token operator\">&lt;</span> distance <span class=\"token operator\">&amp;&amp;</span> distance <span class=\"token operator\">&lt;</span> <span class=\"token number\">20</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">//if the object is a medium distance</span>\n\n    <span class=\"token comment\">//make the RGB LED yellow</span>\n    <span class=\"token function\">analogWrite</span><span class=\"token punctuation\">(</span>redPin<span class=\"token punctuation\">,</span> <span class=\"token number\">255</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">analogWrite</span><span class=\"token punctuation\">(</span>greenPin<span class=\"token punctuation\">,</span> <span class=\"token number\">50</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">analogWrite</span><span class=\"token punctuation\">(</span>bluePin<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>                                    <span class=\"token comment\">//if the object is far away</span>\n\n    <span class=\"token comment\">//make the RGB LED green</span>\n    <span class=\"token function\">analogWrite</span><span class=\"token punctuation\">(</span>redPin<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">analogWrite</span><span class=\"token punctuation\">(</span>greenPin<span class=\"token punctuation\">,</span> <span class=\"token number\">255</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">analogWrite</span><span class=\"token punctuation\">(</span>bluePin<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">50</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>      <span class=\"token comment\">//delay 50ms between each reading</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">//------------------FUNCTIONS-------------------------------</span>\n\n<span class=\"token comment\">//RETURNS THE DISTANCE MEASURED BY THE HC-SR04 DISTANCE SENSOR</span>\n<span class=\"token keyword\">float</span> <span class=\"token function\">getDistance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">float</span> echoTime<span class=\"token punctuation\">;</span>                   <span class=\"token comment\">//variable to store the time it takes for a ping to bounce off an object</span>\n  <span class=\"token keyword\">float</span> calculatedDistance<span class=\"token punctuation\">;</span>         <span class=\"token comment\">//variable to store the distance calculated from the echo time</span>\n\n  <span class=\"token comment\">//send out an ultrasonic pulse that's 10ms long</span>\n  <span class=\"token function\">digitalWrite</span><span class=\"token punctuation\">(</span>trigPin<span class=\"token punctuation\">,</span> HIGH<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">delayMicroseconds</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">digitalWrite</span><span class=\"token punctuation\">(</span>trigPin<span class=\"token punctuation\">,</span> LOW<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  echoTime <span class=\"token operator\">=</span> <span class=\"token function\">pulseIn</span><span class=\"token punctuation\">(</span>echoPin<span class=\"token punctuation\">,</span> HIGH<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>      <span class=\"token comment\">//use the pulsein command to see how long it takes for the</span>\n                                          <span class=\"token comment\">//pulse to bounce back to the sensor</span>\n\n  calculatedDistance <span class=\"token operator\">=</span> echoTime <span class=\"token operator\">/</span> <span class=\"token number\">148.0</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">//calculate the distance of the object that reflected the pulse (half the bounce time multiplied by the speed of sound)</span>\n\n  <span class=\"token keyword\">return</span> calculatedDistance<span class=\"token punctuation\">;</span>              <span class=\"token comment\">//send back the distance that was calculated</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","excerpt":"Operating Voltage: 5V DC Operating Current: 15mA Measure Angle: 15° Ranging Distance: 2cm - 4m Accuracy +-3mm Despite many chips on the back…","tableOfContents":"","fields":{"socialcard":"gatsby-plugin-social-card/e7174c85-c2ae-58d4-b782-646165e04deb.jpg"},"frontmatter":{"date":"April 20, 2024","published":"April 20, 2024","lastModified":"April 20, 2024","title":"Distance sensor","subtitle":"Ultrasonic distance sensor HC-SR04","section":null,"draft":null,"developing":null,"buttonText":null,"buttonLink":null,"secondButtonText":null,"secondButtonLink":null,"featuredImage":null}}},"pageContext":{"showLikes":true,"absolutePath":"/home/runner/work/mikolasan.github.io/mikolasan.github.io/src/markdown/make/distance-sensor.md","url":"/make/distance-sensor","next":{"excerpt":"Not every Pi has Adreno GPU Orange Pi = Rockchip, therefore they have Mali GPU Raspberry Pi = VideoCore GPU Banana Pi (BPI-M4 Berry…","fileAbsolutePath":"/home/runner/work/mikolasan.github.io/mikolasan.github.io/src/markdown/make/list-of-single-board-computers.md","frontmatter":{"title":"List of Single Board Computers","date":"2024-05-10T00:00:00.000Z","topic":null,"article":null},"id":"3ea54fc7-f210-59b2-8949-e6eba9ea9270"},"previous":{"excerpt":"From a letter where a try to find a datasheet I represent <>, a company specializing in the upcycling of used electronics. We're currently…","fileAbsolutePath":"/home/runner/work/mikolasan.github.io/mikolasan.github.io/src/markdown/make/nand-memory.md","frontmatter":{"title":"NAND memory","date":"2023-12-27T00:00:00.000Z","topic":null,"article":null},"id":"d70fae59-0e49-5808-bc54-d61455e06c51"},"recentArticles":[{"excerpt":"Specs  Screen size: 135 x 240 (14.86 x 24.91 mm) Module size: 30.40 x 28 (mm) Colors: 65K Protocol: SPI IC: ST7789V datasheet VCC: 3.3V…","fileAbsolutePath":"/home/runner/work/mikolasan.github.io/mikolasan.github.io/src/markdown/make/tft-display-module-st7789v.md","frontmatter":{"title":"1.14 Inch TFT Display Module","date":"2024-05-20T00:00:00.000Z","topic":null,"article":null},"id":"54f8d0fc-0527-52f3-9f3f-c8092b59aab8"},{"excerpt":"Specs 32-bit MCU (Xtensa LX7, up to 240 MHz) from Espressif ESP32-S2-WROOM. Datasheet, Technical Reference, official Development board, and…","fileAbsolutePath":"/home/runner/work/mikolasan.github.io/mikolasan.github.io/src/markdown/make/esp32-s2-wroom.md","frontmatter":{"title":"ESP32-S2-WROOM","date":"2024-05-10T00:00:00.000Z","topic":null,"article":null},"id":"71da55ca-5916-5ef5-a446-e0e0e33defae"},{"excerpt":"Not every Pi has Adreno GPU Orange Pi = Rockchip, therefore they have Mali GPU Raspberry Pi = VideoCore GPU Banana Pi (BPI-M4 Berry…","fileAbsolutePath":"/home/runner/work/mikolasan.github.io/mikolasan.github.io/src/markdown/make/list-of-single-board-computers.md","frontmatter":{"title":"List of Single Board Computers","date":"2024-05-10T00:00:00.000Z","topic":null,"article":null},"id":"3ea54fc7-f210-59b2-8949-e6eba9ea9270"},{"excerpt":"Operating Voltage: 5V DC Operating Current: 15mA Measure Angle: 15° Ranging Distance: 2cm - 4m Accuracy +-3mm Despite many chips on the back…","fileAbsolutePath":"/home/runner/work/mikolasan.github.io/mikolasan.github.io/src/markdown/make/distance-sensor.md","frontmatter":{"title":"Distance sensor","date":"2024-04-20T00:00:00.000Z","topic":null,"article":null},"id":"e7174c85-c2ae-58d4-b782-646165e04deb"},{"excerpt":"From a letter where a try to find a datasheet I represent <>, a company specializing in the upcycling of used electronics. We're currently…","fileAbsolutePath":"/home/runner/work/mikolasan.github.io/mikolasan.github.io/src/markdown/make/nand-memory.md","frontmatter":{"title":"NAND memory","date":"2023-12-27T00:00:00.000Z","topic":null,"article":null},"id":"d70fae59-0e49-5808-bc54-d61455e06c51"}]}},"staticQueryHashes":["2961657013","447685113"],"slicesMap":{}}