{"componentChunkName":"component---src-templates-blog-template-js","path":"/blog/center-window-in-weston","result":{"data":{"markdownRemark":{"html":"<p>I found so many questions on StackOverflow without answer regarding this problem:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/47973666/how-to-center-a-qmainwindow\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">https://stackoverflow.com/questions/47973666/how-to-center-a-qmainwindow</a> (works only in Xorg)</li>\n<li><a href=\"https://stackoverflow.com/questions/33462134/how-to-position-apps-inside-weston-compositor\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">https://stackoverflow.com/questions/33462134/how-to-position-apps-inside-weston-compositor</a></li>\n<li><a href=\"https://stackoverflow.com/questions/35633817/how-do-i-set-the-x-y-coordinates-of-a-window-in-wayland\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">https://stackoverflow.com/questions/35633817/how-do-i-set-the-x-y-coordinates-of-a-window-in-wayland</a></li>\n<li><a href=\"https://stackoverflow.com/questions/39989704/how-to-extend-wayland-weston-to-control-x-y-position-of-a-window-surface\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">https://stackoverflow.com/questions/39989704/how-to-extend-wayland-weston-to-control-x-y-position-of-a-window-surface</a></li>\n</ul>\n<p>I even has started thinking about switching over to another compositor <a href=\"https://stackoverflow.com/questions/37730940/qt5-on-wayland-without-weston\" target=\"_blank\" rel=\"external nofollow noopener noreferrer\">https://stackoverflow.com/questions/37730940/qt5-on-wayland-without-weston</a></p>\n<p>But I successfully found a way to control the x,y position through <strong>weston/desktop-shell/shell.c</strong> in <code class=\"language-text\">weston_view_set_initial_position(...)</code>. Now all windows appear centered.</p>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\">diff --git a/desktop-shell/shell.c b/desktop-shell/shell.c\nindex f126393a..b494708b 100644\n<span class=\"token coord\">--- a/desktop-shell/shell.c</span>\n<span class=\"token coord\">+++ b/desktop-shell/shell.c</span>\n@@ -4331,16 +4331,8 @@ weston_view_set_initial_position(struct weston_view *view,\n<span class=\"token unchanged\"><span class=\"token prefix unchanged\"> </span>        */\n<span class=\"token prefix unchanged\"> </span>       get_output_work_area(shell, target_output, &amp;area);\n</span>\n<span class=\"token deleted-sign deleted\"><span class=\"token prefix deleted\">-</span>       x = area.x;\n<span class=\"token prefix deleted\">-</span>       y = area.y;\n<span class=\"token prefix deleted\">-</span>       range_x = area.width - view->surface->width;\n<span class=\"token prefix deleted\">-</span>       range_y = area.height - view->surface->height;\n<span class=\"token prefix deleted\">-</span>\n<span class=\"token prefix deleted\">-</span>       if (range_x > 0)\n<span class=\"token prefix deleted\">-</span>               x += random() % range_x;\n<span class=\"token prefix deleted\">-</span>\n<span class=\"token prefix deleted\">-</span>       if (range_y > 0)\n<span class=\"token prefix deleted\">-</span>               y += random() % range_y;\n</span><span class=\"token inserted-sign inserted\"><span class=\"token prefix inserted\">+</span>       x = area.x + floor((view->surface->width - area.width) / 2.);\n<span class=\"token prefix inserted\">+</span>       y = area.y + floor((view->surface->height - area.height) / 2.);\n</span>\n<span class=\"token unchanged\"><span class=\"token prefix unchanged\"> </span>       weston_view_set_position(view, x, y);\n<span class=\"token prefix unchanged\"> </span>}</span></code></pre></div>","excerpt":"I found so many questions on StackOverflow without answer regarding this problem: https://stackoverflow.com/questions/47973666/how-to-center…","tableOfContents":"","fields":{"socialcard":"gatsby-plugin-social-card/05cdf99c-26f6-5104-99ba-c1099c1e5063.jpg"},"frontmatter":{"date":"July 24, 2021","published":"October 14, 2021","lastModified":"October 14, 2021","title":"Center window in Weston","subtitle":null,"section":null,"draft":null,"developing":null,"buttonText":null,"buttonLink":null,"secondButtonText":null,"secondButtonLink":null,"featuredImage":null}}},"pageContext":{"showLikes":true,"absolutePath":"/home/runner/work/mikolasan.github.io/mikolasan.github.io/src/markdown/blog/center-window-in-weston.md","url":"/blog/center-window-in-weston","next":{"excerpt":"There is no science about time management, everything is clear: you look at your tasks in the issue tracker, you say how long they would…","fileAbsolutePath":"/home/runner/work/mikolasan.github.io/mikolasan.github.io/src/markdown/blog/time-management.md","frontmatter":{"title":"About time management","date":"2021-08-15T00:00:00.000Z","topic":null,"article":null},"id":"5160f8fc-63a9-5f7c-8f86-cb94eb486748"},"previous":{"excerpt":"Be careful with \"simple\" examples. Especially with some solutions that look too good to be true.  Developers call it \"simple\", but…","fileAbsolutePath":"/home/runner/work/mikolasan.github.io/mikolasan.github.io/src/markdown/blog/be-careful-with-simple-components.md","frontmatter":{"title":"Be careful with \"simple\" components","date":"2021-07-15T00:00:00.000Z","topic":null,"article":null},"id":"2c490dc3-4c16-583c-8574-5587fecad2d7"},"recentArticles":[{"excerpt":"To read AI hype is over? (post from 2023) - L’IA n’est-elle qu’un mythe qui s’essoufflera ? About Google alternative services -  Comment j…","fileAbsolutePath":"/home/runner/work/mikolasan.github.io/mikolasan.github.io/src/markdown/blog/learning-french.md","frontmatter":{"title":"How I am learning French","date":"2025-07-12T00:00:00.000Z","topic":null,"article":null},"id":"de46ffde-c202-594f-b222-f5f4a548fbe4"},{"excerpt":"I think I like having a dialogue with someone who knows about the topic, even with students who just obtained knowledge from canonical…","fileAbsolutePath":"/home/runner/work/mikolasan.github.io/mikolasan.github.io/src/markdown/blog/lizards-and-continuous-space.md","frontmatter":{"title":"Lizards and Continuous space","date":"2025-06-23T00:00:00.000Z","topic":null,"article":null},"id":"6ee1f95a-2c05-5950-8a0d-20ff4d937fb1"},{"excerpt":"Yes, developers add new features, refactor other parts to get rid of technical debt. This often changes API, which usually triggers…","fileAbsolutePath":"/home/runner/work/mikolasan.github.io/mikolasan.github.io/src/markdown/blog/new-ui-and-conspiracy-in-it-industry.md","frontmatter":{"title":"New UI","date":"2025-06-21T00:00:00.000Z","topic":null,"article":null},"id":"fe2e710c-0afa-5b11-8a7d-1dc46d02f0f9"},{"excerpt":"Now when I almost finished with the titanic competition (I didn’t reach 90% accuracy as I planned, although I doubt it’s possible), it’s…","fileAbsolutePath":"/home/runner/work/mikolasan.github.io/mikolasan.github.io/src/markdown/blog/regulus.md","frontmatter":{"title":"Regulus","date":"2025-05-13T00:00:00.000Z","topic":null,"article":null},"id":"cf23a6fc-e0e2-571b-9dbf-5030b3af25dd"},{"excerpt":"When I found out there was a popular platform where people share open source projects, I imagined GitHub differently. I thought I could find…","fileAbsolutePath":"/home/runner/work/mikolasan.github.io/mikolasan.github.io/src/markdown/blog/how-github-should-work.md","frontmatter":{"title":"How GitHub should work","date":"2025-04-03T00:00:00.000Z","topic":null,"article":null},"id":"63562cc8-f132-5cbc-a444-5639c4a78d98"}]}},"staticQueryHashes":["2961657013","447685113"],"slicesMap":{}}