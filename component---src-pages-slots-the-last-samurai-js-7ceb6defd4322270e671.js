"use strict";(self.webpackChunkgatsby_mikolasan_blog=self.webpackChunkgatsby_mikolasan_blog||[]).push([[154],{5552:function(e,t,n){n.d(t,{A:function(){return f}});var a=n(6540),s=n(7387),o=n(2532),i=n(4091),r=n(823),l=n(7888),c=n(1061),u=n(6528),m=n(9981),d=n(8460);var g=function(e){function t(t){var n;return(n=e.call(this,t)||this).errorCallback=n.errorCallback.bind(n),n.menuClicked=n.menuClicked.bind(n),n.closeCallback=n.closeMenu.bind(n),n.searchClicked=n.searchClicked.bind(n),n.state={menuOpen:!1,searchOpen:!1,errorMessage:""},n}(0,s.A)(t,e);var n=t.prototype;return n.errorCallback=function(e){this.setState({errorMessage:e})},n.menuClicked=function(){this.setState({menuOpen:!this.state.menuOpen,searchOpen:!1})},n.openMenu=function(){this.setState({menuOpen:!0})},n.closeMenu=function(){this.setState({menuOpen:!1})},n.searchClicked=function(){this.state.menuOpen||this.setState({searchOpen:!this.state.searchOpen})},n.render=function(){const{children:e,title:t,published:n,publishedText:s,lastUpdated:g,updatedText:h,section:f,subsection:p,buttonText:b,buttonLink:k,secondButtonText:w,secondButtonLink:_,featuredImage:v,bannerParagraph:x,mainConf:C,languageName:y}=this.props,E=(0,o.c)(v),I=((0,o.d)(v),a.createElement(r.A,{image:E,title:t,buttonText:b,buttonLink:k,secondButtonText:w,secondButtonLink:_,published:n,lastUpdated:g},x)),M=x&&a.createElement(i.A,{buttonText:b,buttonLink:k,secondButtonText:w,secondButtonLink:_,published:n,publishedText:s,lastUpdated:g,updatedText:h},x)||"",T=a.createElement(m.A,{section:f,subsection:p,language:y,menuOpen:this.state.menuOpen,menuClickedCallback:this.menuClicked,searchOpen:this.state.searchOpen,searchClickedCallback:this.searchClicked}),O=a.createElement(a.Fragment,null,T,a.createElement(c.A,{language:y,closeCallback:this.closeCallback})),S=a.createElement("div",{className:"language-"+y},T,this.state.searchOpen&&a.createElement("div",{className:"searchline"},a.createElement(d.A,null)),v&&I||M,a.createElement(l.A,Object.assign({mainConf:C,errorCallback:this.errorCallback,errorMessage:this.state.errorMessage},this.props),e),a.createElement(u.A,{language:y}));return this.state.menuOpen&&O||S},t}(a.Component),h=n(2205);function f(e){return"navigation"===e.mainConf?a.createElement(h.A,Object.assign({},e,{languageName:"en",publishedText:"Published: ",updatedText:"Updated: "})):a.createElement(g,Object.assign({},e,{languageName:"en",publishedText:"Published: ",updatedText:"Updated: "}))}},9868:function(e,t,n){n.d(t,{JZ:function(){return r},Rk:function(){return c},fw:function(){return l}});let a=1e3;let s=10;let o=10*s,i=0;function r(){u(),m(),d(),g()}function l(){a-=o,i=0,g(),u()}function c(e,t){i=e*s,a+=i,g(),u(),function(e){const t=document.getElementById("slot-machine-result");if(!t)return;t.innerHTML=e}(t)}function u(){const e=document.getElementById("balance");e&&(e.innerHTML=`Balance: ${a}`)}function m(){const e=document.getElementById("bet_per_line");e&&(e.innerHTML=`Bet per line: ${s}`)}function d(){const e=document.getElementById("total_bet");e&&(e.innerHTML=`Total bet: ${o}`)}function g(){const e=document.getElementById("win");e&&(e.innerHTML=text_result)}},8977:function(e,t,n){n.r(t),n.d(t,{Head:function(){return be},default:function(){return pe}});var a=n(7387),s=n(6540),o=n(5552),i=n(7528),r=n(9868);const l=128,c=128,u=110;let m,d;const g="BS",h="CH",f="CR",p="JD",b="LA",k="NJ",w="PA",_="RI",v="SM",x="SU",C="TR";const y=[[_,_,g,h,f,p,b,k,w,_,_,v,x,_,_,C,C,C,C],[v,C,_,_,p,p,f,_,w,k,p,p,p,p,x,b,p,p,h,g],[v,w,w,g,_,_,b,p,p,p,p,w,w,h,k,w,w,_,C,p,p,x,f,w,w],[f,p,p,x,w,_,_,_,g,p,p,p,p,h,b,v,p,p,k],[f,_,C,p,p,p,_,_,v,g,_,_,x,b,p,p,k,h]],E=[[1,4,7,10,13]],I={x:396,y:427,a:53,b:52,enabled:!0,clicked:!1,mouse:"out"};let M=new Map;const T=[];T.length=5;const O=[];O.length=5;const S=[];S.length=5;const B=128;let L=0,A=0;let j=0;let N=0;const R=[];R.length=5;let P=0,H=0,U=0,F=null;const J={on_enter:function(){},on_leave:function(){}};const Y={on_enter:function(){var e;O.fill(0),S.fill(B),H=0,e=768,U=Math.sqrt(2*e),L=U,A=2*L,j=U/66.75*(1/60),R.fill(0),P=0;const t=function(){const e=[];for(let t=0;t<5;++t){const n=z(t);for(let a=0;a<3;++a)e[3*t+a]=Z(t,n+a)}return e}();console.log("result symbols",t),function(e){F=e}(t),(0,r.fw)()},on_leave:function(e){}},$={on_enter:function(){},on_leave:function(e){}},q={on_enter:function(){N=0,this.current_animating_line=0},on_leave:function(){},win:0,animating_slots:[]};let D=J;function W(e,t){e.on_leave(t),D=t,t.on_enter()}function z(e){const t=y[e];return Math.floor(Math.random()*t.length)}function Z(e,t){const n=y[e];return n[t%n.length]}function K(e){return M.get(e)[1]}function X(e){return K(function(e){return Z(e,z(e))}(e))}function G(e){T[e]=[];for(let t=0;t<5;++t)T[e].push(X(e))}function Q(){for(let e=0;e<5;++e){O[e]=0,S[e]=B;for(let t=0;t<3;++t){const n=3*e+t;T[e][t+1]=K(F[n])}}V()}function V(){const{win:e,animating_slots:t,text_result:n}=function(){const e=0,t="";return{win:e,animating_slots:E,text_result:t}}();t.length>0?(W(D,q),q.win=e,q.animating_slots=t,(0,r.Rk)(e,n)):(W(D,J),(0,r.Rk)(0,"Nothing"))}function ee(e){if(T[e].pop(),R[e]>8&&10-R[e]+1>=0){const t=10-R[e]+1,n=K(F[3*e+t]);T[e].unshift(n)}else{const t=X(e);T[e].unshift(t)}}let te=0;function ne(e){return Math.pow(e,2)/2}function ae(e,t,n){if(D!==J&&D!==q){if(H+=t*j,H>A&&12==R[e])return P+=1,void(5===P&&V());D===Y&&H>L&&W(D,$),D===Y?(te=H,O[e]=ne(H),O[e]-S[e]>=0&&(R[e]+=1,n(e),S[e]+=c)):D===$&&(H>A?(O[e]+=1,O[e]>S[e]&&(O[e]=S[e])):O[e]=-ne(H-2*te)+2*ne(te),O[e]-S[e]>=0&&(R[e]+=1,n(e),S[e]+=c))}}function se(e,t){return{x:e*l,y:t*c+O[e]-S[e]}}const oe=2500;let ie=0;let re=null,le=0;function ce(e,t){const n=t-le;le=t,e.fillStyle="#BDC2BF",e.fillRect(0,0,m,d),e.save();const a=m/900;e.scale(a,a),e.drawImage(re,0,0),e.save(),e.beginPath(),e.rect(u,50,668,384),e.clip();for(let s=0;s<5;++s){for(let t=0;t<T[s].length;++t){const{x:n,y:a}=se(s,t);e.drawImage(T[s][t],u+n+7*s,50+a)}ae(s,n,ee)}e.restore(),e.save(),e.strokeStyle="rgb(37, 41, 28)",e.lineWidth=6;for(let s=0;s<5;++s){const t=s*l,n=0;e.strokeRect(u+t+7*s,50+n,l,384)}e.restore(),D==q&&function(e,t){N+=t,Math.floor(N/1e3)>q.current_animating_line&&(q.current_animating_line+=1,q.current_animating_line>q.animating_slots.length&&(q.current_animating_line=0,N=0));const n=q.current_animating_line;if(n===q.animating_slots.length)return;const a=q.animating_slots[n];e.save(),e.strokeStyle="rgb(0, 0, 0)",e.lineWidth=6;for(const s of a){const t=Math.floor(s/3),n=s%3;e.strokeRect(u+t*l+7*t,50+n*c,l,c)}e.restore()}(e,n),I.enabled?I.clicked?e.drawImage(I.pressed,I.x,I.y):"in"==I.mouse?e.drawImage(I.hover,I.x,I.y):(ie+=n,ie>oe?e.drawImage(I.highlight,I.x,I.y):e.drawImage(I.normal,I.x,I.y),ie>3e3&&(ie-=3e3)):e.drawImage(I.disabled,I.x,I.y),e.restore();window.requestAnimationFrame((t=>ce(e,t)))}function ue(e,t){return{x:t.offsetX,y:t.offsetY}}function me(e,t){const n=m/900,a=(t.x+t.a)*n,s=(t.y+t.b)*n,o=t.a*n,i=t.b*n;return Math.pow(e.x-a,2)/Math.pow(o,2)+Math.pow(e.y-s,2)/Math.pow(i,2)<=1}function de(){M=new Map([[g,["/images/slots/samurai/bonsai.jpeg"]],[h,["/images/slots/samurai/chest.jpeg"]],[f,["/images/slots/samurai/crab.jpeg"]],[p,["/images/slots/samurai/jade.jpeg"]],[b,["/images/slots/samurai/lantern.jpeg"]],[k,["/images/slots/samurai/ninja.jpeg"]],[w,["/images/slots/samurai/panda.jpeg"]],[_,["/images/slots/samurai/rice.jpeg"]],[v,["/images/slots/samurai/samurai.jpeg"]],[x,["/images/slots/samurai/sushi.jpeg"]],[C,["/images/slots/samurai/turtle.jpeg"]]]);for(const n of M.values())n.push(new Image),n[1].src=n[0];O.fill(0),S.fill(B);for(let n=0;n<5;++n)G(n);const e=document.getElementById("reels");if(!e)return void console.error("no canvas");if(e.addEventListener("mousemove",(function(e){me(ue(0,e),I)?I.mouse="in":I.mouse="out"}),!1),e.addEventListener("mousedown",(function(e){me(ue(0,e),I)&&(I.clicked=!0)}),!1),e.addEventListener("mouseup",(function(e){me(ue(0,e),I)&&(I.clicked=!1)}),!1),e.addEventListener("click",(function(e){me(ue(0,e),I)&&(I.clicked=!1,function(){switch(D){case J:console.log("was idle, pressed SPIN"),W(D,Y);break;case Y:console.log("SPIN while spinning = STOP"),Q();break;case $:console.log("SPIN while stopping = STOP"),Q();break;case q:console.log("SPIN while winning = BREAK"),W(D,Y);break;default:console.log(`some other state: ${D}. How?`)}}())}),!1),I.normal=new Image,I.disabled=new Image,I.hover=new Image,I.pressed=new Image,I.highlight=new Image,I.normal.src="/images/idea-generator/spin_button.png",I.disabled.src="/images/idea-generator/spin_button_disabled.png",I.hover.src="/images/idea-generator/spin_button_hover.png",I.pressed.src="/images/idea-generator/spin_button_pressed.png",I.highlight.src="/images/idea-generator/spin_button_highlight.png",re=new Image,re.src="/images/slots/samurai/background.jpeg",!e.getContext)return void console.error("canvas without context");const t=e.getContext("2d");ge(e),window.addEventListener("resize",(()=>{console.log("resize"),t.clearRect(0,0,t.width,t.height),ge(e),le=0,ce(t,0)}));window.requestAnimationFrame((e=>ce(t,e)))}function ge(e){const t=900/550;e.width=e.clientWidth,e.height=e.width/t,m=e.width,d=e.height}var he=n(5630);let fe=function(e){function t(){return e.apply(this,arguments)||this}(0,a.A)(t,e);var n=t.prototype;return n.componentDidMount=function(){de(),(0,r.JZ)()},n.render=function(){return s.createElement(o.A,{title:"The Last Samurai",section:"slots"},s.createElement("p",null,"A special symbol populates all reels one by one by crushing them. But only when some special symbol lands on tha reel"),s.createElement("p",null,"Stacked symbol on the first reel stops in the full length, then a fighter shoots from the right. Other reels spin. If the same symbol appears on the next reel, the fighter hits the next reel and fills it all. Now, he is on the second reel."),s.createElement("div",null,s.createElement("canvas",{className:he.Y,id:"reels"}),s.createElement("canvas",{className:he.Y,id:"ui"}),s.createElement("div",{id:"slot-machine-result"})))},t}(s.Component);var pe=fe;const be=e=>{var t;let{location:n,data:a,pageContext:o}=e;return s.createElement(i.k,{path:n.pathname,data:a,frontmatter:null==a||null===(t=a.markdownRemark)||void 0===t?void 0:t.frontmatter,pageContext:o,title:"The Last Samurai"})}},5630:function(e,t,n){n.d(t,{Y:function(){return a}});var a="index-module--slotmachine--196e2"}}]);
//# sourceMappingURL=component---src-pages-slots-the-last-samurai-js-7ceb6defd4322270e671.js.map