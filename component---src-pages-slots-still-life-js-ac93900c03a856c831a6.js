"use strict";(self.webpackChunkgatsby_mikolasan_blog=self.webpackChunkgatsby_mikolasan_blog||[]).push([[820],{5552:function(e,n,t){t.d(n,{A:function(){return f}});var o=t(6540),a=t(7387),i=t(2532),s=t(4091),r=t(823),l=t(7888),c=t(1061),u=t(6528),g=t(9981),d=t(8460);var m=function(e){function n(n){var t;return(t=e.call(this,n)||this).errorCallback=t.errorCallback.bind(t),t.menuClicked=t.menuClicked.bind(t),t.closeCallback=t.closeMenu.bind(t),t.searchClicked=t.searchClicked.bind(t),t.state={menuOpen:!1,searchOpen:!1,errorMessage:""},t}(0,a.A)(n,e);var t=n.prototype;return t.errorCallback=function(e){this.setState({errorMessage:e})},t.menuClicked=function(){this.setState({menuOpen:!this.state.menuOpen,searchOpen:!1})},t.openMenu=function(){this.setState({menuOpen:!0})},t.closeMenu=function(){this.setState({menuOpen:!1})},t.searchClicked=function(){this.state.menuOpen||this.setState({searchOpen:!this.state.searchOpen})},t.render=function(){const{children:e,title:n,published:t,publishedText:a,lastUpdated:m,updatedText:h,section:f,subsection:p,buttonText:b,buttonLink:v,secondButtonText:k,secondButtonLink:w,featuredImage:_,bannerParagraph:x,mainConf:C,languageName:E}=this.props,y=(0,i.c)(_),I=((0,i.d)(_),o.createElement(r.A,{image:y,title:n,buttonText:b,buttonLink:v,secondButtonText:k,secondButtonLink:w,published:t,lastUpdated:m},x)),M=x&&o.createElement(s.A,{buttonText:b,buttonLink:v,secondButtonText:k,secondButtonLink:w,published:t,publishedText:a,lastUpdated:m,updatedText:h},x)||"",T=o.createElement(g.A,{section:f,subsection:p,language:E,menuOpen:this.state.menuOpen,menuClickedCallback:this.menuClicked,searchOpen:this.state.searchOpen,searchClickedCallback:this.searchClicked}),O=o.createElement(o.Fragment,null,T,o.createElement(c.A,{language:E,closeCallback:this.closeCallback})),S=o.createElement("div",{className:"language-"+E},T,this.state.searchOpen&&o.createElement("div",{className:"searchline"},o.createElement(d.A,null)),_&&I||M,o.createElement(l.A,Object.assign({mainConf:C,errorCallback:this.errorCallback,errorMessage:this.state.errorMessage},this.props),e),o.createElement(u.A,{language:E}));return this.state.menuOpen&&O||S},n}(o.Component),h=t(2205);function f(e){return"navigation"===e.mainConf?o.createElement(h.A,Object.assign({},e,{languageName:"en",publishedText:"Published: ",updatedText:"Updated: "})):o.createElement(m,Object.assign({},e,{languageName:"en",publishedText:"Published: ",updatedText:"Updated: "}))}},9868:function(e,n,t){t.d(n,{JZ:function(){return r},Rk:function(){return c},fw:function(){return l}});let o=1e3;let a=10;let i=10*a,s=0;function r(){u(),g(),d(),m()}function l(){o-=i,s=0,m(),u()}function c(e,n){s=e*a,o+=s,m(),u(),function(e){const n=document.getElementById("slot-machine-result");if(!n)return;n.innerHTML=e}(n)}function u(){const e=document.getElementById("balance");e&&(e.innerHTML=`Balance: ${o}`)}function g(){const e=document.getElementById("bet_per_line");e&&(e.innerHTML=`Bet per line: ${a}`)}function d(){const e=document.getElementById("total_bet");e&&(e.innerHTML=`Total bet: ${i}`)}function m(){const e=document.getElementById("win");e&&(e.innerHTML=text_result)}},3720:function(e,n,t){t.r(n),t.d(n,{Head:function(){return de},default:function(){return ge}});var o=t(7387),a=t(6540),i=t(5552),s=t(7528),r=t(9868);const l=128,c=128;let u,g;const d="A1",m="A2",h="K2",f="S1",p="S2",b="S3",v="S4";const k=[[d,m,b,h,p,m,h,h,f,v],[d,m,b,h,p,m,h,h,f,v],[d,m,b,h,p,m,h,h,f,v],[d,m,b,h,p,m,h,h,f,v],[d,m,b,h,p,m,h,h,f,v]],w=[[1,4,7,10,13]],_={x:342,y:727,a:53,b:52,enabled:!0,clicked:!1,mouse:"out"};let x=new Map;const C=[];C.length=5;const E=[];E.length=5;const y=[];y.length=5;const I=128;let M=0,T=0;let O=0;let S=0;const L=[];L.length=5;let A=0,B=0,j=0,N=null;const P={on_enter:function(){},on_leave:function(){}};const R={on_enter:function(){var e;E.fill(0),y.fill(I),B=0,e=768,j=Math.sqrt(2*e),M=j,T=2*M,O=j/66.75*(1/60),L.fill(0),A=0;const n=function(){const e=[];for(let n=0;n<5;++n){const t=$(n);for(let o=0;o<3;++o)e[3*n+o]=F(n,t+o)}return e}();console.log("result symbols",n),function(e){N=e}(n),(0,r.fw)()},on_leave:function(e){}},H={on_enter:function(){},on_leave:function(e){}},U={on_enter:function(){S=0,this.current_animating_line=0},on_leave:function(){},win:0,animating_slots:[]};let q=P;function Y(e,n){e.on_leave(n),q=n,n.on_enter()}function $(e){const n=k[e];return Math.floor(Math.random()*n.length)}function F(e,n){const t=k[e];return t[n%t.length]}function K(e){return x.get(e)[1]}function z(e){return K(function(e){return F(e,$(e))}(e))}function J(e){C[e]=[];for(let n=0;n<5;++n)C[e].push(z(e))}function W(){for(let e=0;e<5;++e){E[e]=0,y[e]=I;for(let n=0;n<3;++n){const t=3*e+n;C[e][n+1]=K(N[t])}}Z()}function Z(){const{win:e,animating_slots:n,text_result:t}=function(){const e=0,n="";return{win:e,animating_slots:w,text_result:n}}();n.length>0?(Y(q,U),U.win=e,U.animating_slots=n,(0,r.Rk)(e,t)):(Y(q,P),(0,r.Rk)(0,"Nothing"))}function D(e){if(C[e].pop(),L[e]>8&&10-L[e]+1>=0){const n=10-L[e]+1,t=K(N[3*e+n]);C[e].unshift(t)}else{const n=z(e);C[e].unshift(n)}}let Q=0;function X(e){return Math.pow(e,2)/2}function G(e,n,t){if(q!==P&&q!==U){if(B+=n*O,B>T&&12==L[e])return A+=1,void(5==A&&Z());q===R&&B>M&&Y(q,H),q===R?(Q=B,E[e]=X(B),E[e]-y[e]>=0&&(L[e]+=1,t(e),y[e]+=c)):q===H&&(B>T?(E[e]+=1,E[e]>y[e]&&(E[e]=y[e])):E[e]=-X(B-2*Q)+2*X(Q),E[e]-y[e]>=0&&(L[e]+=1,t(e),y[e]+=c))}}function V(e,n){return{x:e*l,y:n*c+E[e]-y[e]}}const ee=2500;let ne=0;let te=null,oe=0;function ae(e,n){const t=n-oe;oe=n,e.fillStyle="#fff",e.fillRect(0,0,u,g),e.save();const o=u/900;e.scale(o,o),e.drawImage(te,0,0),e.save(),e.beginPath(),e.rect(67,271,668,384),e.clip();for(let a=0;a<5;++a){for(let n=0;n<C[a].length;++n){const{x:t,y:o}=V(a,n);e.drawImage(C[a][n],67+t+7*a,271+o)}G(a,t,D)}e.restore(),q==U&&function(e,n){S+=n,Math.floor(S/1e3)>U.current_animating_line&&(U.current_animating_line+=1,U.current_animating_line>U.animating_slots.length&&(U.current_animating_line=0,S=0));const t=U.current_animating_line;if(t==U.animating_slots.length)return;const o=U.animating_slots[t];e.save(),e.strokeStyle="rgb(0, 0, 0)",e.lineWidth=6;for(const a of o){const n=Math.floor(a/3),t=a%3;e.strokeRect(67+n*l+7*n,271+t*c,l,c)}e.restore()}(e,t),_.enabled?_.clicked?e.drawImage(_.pressed,_.x,_.y):"in"==_.mouse?e.drawImage(_.hover,_.x,_.y):(ne+=t,ne>ee?e.drawImage(_.highlight,_.x,_.y):e.drawImage(_.normal,_.x,_.y),ne>3e3&&(ne-=3e3)):e.drawImage(_.disabled,_.x,_.y),e.restore();window.requestAnimationFrame((n=>ae(e,n)))}function ie(e,n){return{x:n.offsetX,y:n.offsetY}}function se(e,n){const t=u/900,o=(n.x+n.a)*t,a=(n.y+n.b)*t,i=n.a*t,s=n.b*t;return Math.pow(e.x-o,2)/Math.pow(i,2)+Math.pow(e.y-a,2)/Math.pow(s,2)<=1}function re(){x=new Map([[d,["/images/slots/van-gogh/a1.jpeg"]],[m,["/images/slots/van-gogh/a2.jpeg"]],["K1",["/images/slots/van-gogh/k1.jpeg"]],[h,["/images/slots/van-gogh/k2.jpeg"]],["Q1",["/images/slots/van-gogh/q1.jpeg"]],[f,["/images/slots/van-gogh/spades1.jpeg"]],[p,["/images/slots/van-gogh/spades2.jpeg"]],[b,["/images/slots/van-gogh/spades3.jpeg"]],[v,["/images/slots/van-gogh/spades4.jpeg"]]]);for(const t of x.values())t.push(new Image),t[1].src=t[0];E.fill(0),y.fill(I);for(let t=0;t<5;++t)J(t);const e=document.getElementById("reels");if(!e)return void console.error("no canvas");if(e.addEventListener("mousemove",(function(e){se(ie(0,e),_)?_.mouse="in":_.mouse="out"}),!1),e.addEventListener("mousedown",(function(e){se(ie(0,e),_)&&(_.clicked=!0)}),!1),e.addEventListener("mouseup",(function(e){se(ie(0,e),_)&&(_.clicked=!1)}),!1),e.addEventListener("click",(function(e){se(ie(0,e),_)&&(_.clicked=!1,function(){switch(q){case P:console.log("was idle, pressed SPIN"),Y(q,R);break;case R:console.log("SPIN while spinning = STOP"),W();break;case H:console.log("SPIN while stopping = STOP"),W();break;case U:console.log("SPIN while winning = BREAK"),Y(q,R);break;default:console.log(`some other state: ${q}. How?`)}}())}),!1),_.normal=new Image,_.disabled=new Image,_.hover=new Image,_.pressed=new Image,_.highlight=new Image,_.normal.src="/images/idea-generator/spin_button.png",_.disabled.src="/images/idea-generator/spin_button_disabled.png",_.hover.src="/images/idea-generator/spin_button_hover.png",_.pressed.src="/images/idea-generator/spin_button_pressed.png",_.highlight.src="/images/idea-generator/spin_button_highlight.png",te=new Image,te.src="/images/idea-generator/slot-frame.png",!e.getContext)return void console.error("canvas without context");const n=e.getContext("2d");le(e),window.addEventListener("resize",(()=>{console.log("resize"),n.clearRect(0,0,n.width,n.height),le(e),oe=0,ae(n,0)}));window.requestAnimationFrame((e=>ae(n,e)))}function le(e){e.width=e.clientWidth,e.height=e.width/(900/843),u=e.width,g=e.height}var ce=t(5630);let ue=function(e){function n(){return e.apply(this,arguments)||this}(0,o.A)(n,e);var t=n.prototype;return t.componentDidMount=function(){re(),(0,r.JZ)()},t.render=function(){return a.createElement(i.A,{title:"Still Life",section:"slots"},a.createElement("div",null,a.createElement("canvas",{className:ce.Y,id:"reels"}),a.createElement("canvas",{className:ce.Y,id:"ui"}),a.createElement("div",{id:"slot-machine-result"})))},n}(a.Component);var ge=ue;const de=e=>{var n;let{location:t,data:o,pageContext:i}=e;return a.createElement(s.k,{path:t.pathname,data:o,frontmatter:null==o||null===(n=o.markdownRemark)||void 0===n?void 0:n.frontmatter,pageContext:i,title:"Still Life"})}},5630:function(e,n,t){t.d(n,{Y:function(){return o}});var o="index-module--slotmachine--196e2"}}]);
//# sourceMappingURL=component---src-pages-slots-still-life-js-ac93900c03a856c831a6.js.map